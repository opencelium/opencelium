{"templateId":"c64a77bd-5ffd-439c-8bf2-49566330bc11","name":"zabbix.create/update","description":"Create/update a host. The fields object_title, hostname and ipv4_addresses are used for the import. Config items are filtered according to the object type “server”. All objects are created in the otrs standard class “Hardware”. The identifier field is a hostname. ","connection":{"title":"cre","description":"","fromConnector":{"connectorId":27,"invoker":{"name":"i-doit","links":[]},"methods":[{"nodeId":null,"index":"0","name":"cmdb.objects.read","color":"#FFCFB5","request":{"nodeId":null,"endpoint":"{url}","method":"POST","header":null,"body":{"method":"cmdb.objects.read","id":"1","params":{"filter":{"sys_id":"","firstname":"","ids":[],"type_title":"","type":["59"],"title":"","email":"","lastname":""},"apikey":"{apikey}","limit":"","order_by":"","language":"","sort":""},"version":"2.0"},"links":[]},"response":{"nodeId":null,"name":"response","success":{"nodeId":null,"status":"200","header":null,"body":{"result":[{"cmdb_status_title":"","image":"","sysid":"","created":"","type_title":"","cmdb_status":"","id":"","title":"","type":"","updated":"","status":"","type_group_title":""}],"id":"","jsonrpc":""},"links":[]},"fail":{"nodeId":null,"status":"200","header":null,"body":{"error":{"code":"","data":"","message":""}},"links":[]},"links":[]},"links":[]},{"nodeId":null,"index":"1_0","name":"cmdb.category.read","color":"#98BEC7","request":{"nodeId":null,"endpoint":"{url}","method":"POST","header":null,"body":{"method":"cmdb.category.read","id":"1","params":{"apikey":"{apikey}","objID":"#FFCFB5.(response).success.result[].id","language":"","category":"C__CATG__IP"},"version":"2.0"},"links":[]},"response":{"nodeId":null,"name":"response","success":{"nodeId":null,"status":"200","header":null,"body":{"result":[{"hostname":"","objID":"","id":""}]},"links":[]},"fail":{"nodeId":null,"status":"200","header":null,"body":{"error":{"code":"","data":"","message":""}},"links":[]},"links":[]},"links":[]}],"operators":[{"nodeId":null,"type":"loop","index":"1","condition":{"relationalOperator":"","leftStatement":{"color":"#FFCFB5","field":"success.result[]","type":"response","rightPropertyValue":"","links":[]},"rightStatement":null,"links":[]},"links":[]}],"links":[]},"toConnector":{"connectorId":24,"invoker":{"name":"zabbix","links":[]},"methods":[{"nodeId":null,"index":"0_0","name":"host.get","color":"#C77E7E","request":{"nodeId":null,"endpoint":"{url}/objects/hosts","method":"POST","header":null,"body":{"method":"host.get","auth":"{token}","id":"1","params":{"filter":{"host":"#FFCFB5.(response).success.result[].title"},"output":["hostid","host"],"selectInterfaces":["interfaceid","ip"]},"jsonrpc":"2.0"},"links":[]},"response":{"nodeId":null,"name":"response","success":{"nodeId":null,"status":"200","header":null,"body":{"result":[{"ipmi_privilege":"","maintenance_status":"","jmx_available":"","errors_from":"","tls_psk_identity":"","flags":"","available":"","snmp_errors_from":"","description":"","hostid":"","tls_issuer":"","error":"","jmx_errors_from":"","auto_compress":"","proxy_hostid":"","maintenanceid":"","maintenance_from":"","ipmi_authtype":"","snmp_disable_until":"","ipmi_username":"","host":"","tls_psk":"","jmx_error":"","jmx_disable_until":"","interfaces":[{"ip":"","interfaceid":""}],"disable_until":"","ipmi_errors_from":"","proxy_address":"","snmp_error":"","maintenance_type":"","tls_accept":"","snmp_available":"","templateid":"","ipmi_available":"","lastaccess":"","ipmi_password":"","ipmi_error":"","tls_connect":"","name":"","ipmi_disable_until":"","tls_subject":"","status":""}]},"links":[]},"fail":{"nodeId":null,"status":"400","header":null,"body":null,"links":[]},"links":[]},"links":[]},{"nodeId":null,"index":"0_1_0","name":"host.create","color":"#6477AB","request":{"nodeId":null,"endpoint":"{url}","method":"POST","header":null,"body":{"method":"host.create","auth":"{token}","id":"1","params":"#FFCFB5.(response).success.result[].title;#98BEC7.(response).success.result[]","jsonrpc":"2.0"},"links":[]},"response":{"nodeId":null,"name":"response","success":{"nodeId":null,"status":"200","header":null,"body":{"result":[{"code":"","status":""}]},"links":[]},"fail":{"nodeId":null,"status":"400","header":null,"body":null,"links":[]},"links":[]},"links":[]}],"operators":[{"nodeId":null,"type":"loop","index":"0","condition":{"relationalOperator":"","leftStatement":{"color":"#FFCFB5","field":"success.result[]","type":"response","rightPropertyValue":"","links":[]},"rightStatement":null,"links":[]},"links":[]},{"nodeId":null,"type":"if","index":"0_1","condition":{"relationalOperator":"IsEmpty","leftStatement":{"color":"#C77E7E","field":"success.result[]","type":"response","rightPropertyValue":"","links":[]},"rightStatement":null,"links":[]},"links":[]}],"links":[]},"fieldBinding":[{"from":[{"color":"#FFCFB5","type":"response","field":"success.result[].title","links":[]}],"enhancement":{"enhanceId":null,"name":"","description":"","expertCode":"RESULT_VAR = [VAR_0];","expertVar":"//var RESULT_VAR = #C77E7E.(request).params.filter.host[];\n//var VAR_0 = #FFCFB5.(response).success.result[].title;","simpleCode":null,"language":"js","links":[]},"to":[{"color":"#C77E7E","type":"request","field":"params.filter.host[]","links":[]}],"links":[]},{"from":[{"color":"#98BEC7","type":"response","field":"success.result[]","links":[]},{"color":"#FFCFB5","type":"response","field":"success.result[].title","links":[]}],"enhancement":{"enhanceId":null,"name":"","description":"","expertCode":"\nRESULT_VAR.host = VAR_0;\nRESULT_VAR.interfaces = [\n  {\n    dns:\"\",\n    type: 1,\n    main: 1,\n    useip: 1,\n    ip: VAR_1[0].ipv4_address.ref_title,\n    port: 10050\n  }\n];\nRESULT_VAR.groups = [{groupid: 4}];\nRESULT_VAR.templates = [{templateid: 10186}]","expertVar":"//var RESULT_VAR = #6477AB.(request).params;\n//var VAR_0 = #FFCFB5.(response).success.result[].title;\n//var VAR_1 = #98BEC7.(response).success.result[];","simpleCode":null,"language":"js","links":[]},"to":[{"color":"#6477AB","type":"request","field":"params","links":[]}],"links":[]}],"links":[]}}
