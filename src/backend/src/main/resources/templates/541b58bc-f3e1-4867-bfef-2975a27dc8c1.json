{"templateId":"541b58bc-f3e1-4867-bfef-2975a27dc8c1","name":"icinga2.delete","description":"Hosts are deleted if they no longer exist in i-doit. Hosts are filtered according to the object types “server” and “client”. The identifier field is a hostname.","connection":{"title":"icinga.delete","description":"","fromConnector":{"connectorId":27,"invoker":{"name":"i-doit","links":[]},"methods":[{"nodeId":null,"index":"0","name":"cmdb.objects.read","color":"#FFCFB5","request":{"nodeId":null,"endpoint":"{url}","method":"POST","header":null,"body":{"method":"cmdb.objects.read","id":"1","params":{"filter":{"sys_id":"","firstname":"","ids":[],"type_title":"","type":["59"],"title":"","email":"","lastname":""},"apikey":"{apikey}","limit":"","order_by":"","language":"","sort":""},"version":"2.0"},"links":[]},"response":{"nodeId":null,"name":"response","success":{"nodeId":null,"status":"200","header":null,"body":{"result":[{"cmdb_status_title":"","image":"","sysid":"","created":"","type_title":"","id":"","cmdb_status":"","title":"","type":"","updated":"","type_group_title":"","status":""}],"id":"","jsonrpc":""},"links":[]},"fail":{"nodeId":null,"status":"200","header":null,"body":{"error":{"code":"","data":"","message":""}},"links":[]},"links":[]},"links":[]}],"operators":[],"links":[]},"toConnector":{"connectorId":23,"invoker":{"name":"icinga2","links":[]},"methods":[{"nodeId":null,"index":"0","name":"getHosts","color":"#6477AB","request":{"nodeId":null,"endpoint":"{url}/objects/hosts","method":"GET","header":null,"body":null,"links":[]},"response":{"nodeId":null,"name":"response","success":{"nodeId":null,"status":"200","header":null,"body":{"results":[{"name":"","attrs":{"address":"","active":""}}]},"links":[]},"fail":{"nodeId":null,"status":"400","header":null,"body":null,"links":[]},"links":[]},"links":[]},{"nodeId":null,"index":"1_0_0","name":"deleteHost","color":"#98BEC7","request":{"nodeId":null,"endpoint":"{url}/objects/hosts/{%#6477AB.(response).success.results[].name%}?cascade=1","method":"DELETE","header":null,"body":null,"links":[]},"response":{"nodeId":null,"name":"response","success":{"nodeId":null,"status":"200","header":null,"body":{"results":[{"code":"","status":""}]},"links":[]},"fail":{"nodeId":null,"status":"400","header":null,"body":null,"links":[]},"links":[]},"links":[]}],"operators":[{"nodeId":null,"type":"loop","index":"1","condition":{"relationalOperator":"","leftStatement":{"color":"#6477AB","field":"success.results[]","type":"response","rightPropertyValue":"","links":[]},"rightStatement":null,"links":[]},"links":[]},{"nodeId":null,"type":"if","index":"1_0","condition":{"relationalOperator":"NotContains","leftStatement":{"color":"#FFCFB5","field":"success.result[]","type":"response","rightPropertyValue":"","links":[]},"rightStatement":{"color":"#6477AB","field":"success.results[].name","type":"response","rightPropertyValue":"title","links":[]},"links":[]},"links":[]}],"links":[]},"fieldBinding":[],"links":[]}}
