{"templateId":"07cef3a5-1404-417d-a7de-9f6251a3f5f2","name":"sensu.create/update","description":"Create/update a config item. The fields object_title, cmdb_status_title, manufactuere_title are used for the import. Config items are filtered according to the object-type 'client'. All objects are created in the otrs standard class 'Hardware'. The identifier field is a config item name.","license":null,"connection":{"title":"sensu.create","description":"","fromConnector":{"connectorId":10,"invoker":{"name":"i-doit","links":[]},"methods":[{"nodeId":null,"index":"0","name":"cmdb.objects.read","color":"#FFCFB5","request":{"nodeId":null,"endpoint":"{url}","method":"POST","header":null,"body":{"method":"cmdb.objects.read","id":"1","params":{"filter":{"sys_id":"","firstname":"","ids":[],"type_title":"","title":"","type":["59"],"email":"","lastname":""},"apikey":"{apikey}","limit":"","order_by":"","language":"","sort":""},"version":"2.0"},"links":[]},"response":{"nodeId":null,"name":"response","success":{"nodeId":null,"status":"200","header":null,"body":{"result":[{"image":"","cmdb_status_title":"","sysid":"","created":"","type_title":"","id":"","cmdb_status":"","title":"","type":"","updated":"","status":"","type_group_title":""}],"id":"","jsonrpc":""},"links":[]},"fail":{"nodeId":null,"status":"200","header":null,"body":{"error":{"code":"","data":"","message":""}},"links":[]},"links":[]},"links":[]},{"nodeId":null,"index":"1_0","name":"cmdb.category.read","color":"#C77E7E","request":{"nodeId":null,"endpoint":"{url}","method":"POST","header":null,"body":{"method":"cmdb.category.read","id":"1","params":{"apikey":"{apikey}","objID":"#FFCFB5.(response).success.result[].id","language":"","category":"C__CATG__IP"},"version":"2.0"},"links":[]},"response":{"nodeId":null,"name":"response","success":{"nodeId":null,"status":"200","header":null,"body":{"result":[{"hostname":"","objID":"","id":""}]},"links":[]},"fail":{"nodeId":null,"status":"200","header":null,"body":{"error":{"code":"","data":"","message":""}},"links":[]},"links":[]},"links":[]}],"operators":[{"nodeId":null,"type":"loop","index":"1","condition":{"relationalOperator":"","leftStatement":{"color":"#FFCFB5","field":"success.result[]","type":"response","rightPropertyValue":"","links":[]},"rightStatement":null,"links":[]},"links":[]}],"links":[]},"toConnector":{"connectorId":12,"invoker":{"name":"sensu","links":[]},"methods":[{"nodeId":null,"index":"0_0","name":"createOrUpdateEntity","color":"#6477AB","request":{"nodeId":null,"endpoint":"{url}/api/core/v2/namespaces/default/entities/{%#C77E7E.(response).success.result[0].hostname%}","method":"PUT","header":null,"body":{"metadata":{"name":"#C77E7E.(response).success.result[]","namespace":"default","annotations":"","labels":""},"subscriptions":["check-poller"],"deregistration":"","entity_class":"proxy","sensu_agent_version":"1.0.0"},"links":[]},"response":{"nodeId":null,"name":"response","success":{"nodeId":null,"status":"200","header":null,"body":{"id":""},"links":[]},"fail":{"nodeId":null,"status":"500","header":null,"body":{"error":""},"links":[]},"links":[]},"links":[]}],"operators":[{"nodeId":null,"type":"loop","index":"0","condition":{"relationalOperator":"","leftStatement":{"color":"#FFCFB5","field":"success.result[]","type":"response","rightPropertyValue":"","links":[]},"rightStatement":null,"links":[]},"links":[]}],"links":[]},"fieldBinding":[{"from":[{"color":"#C77E7E","type":"response","field":"success.result[]","links":[]}],"enhancement":{"enhanceId":null,"name":"","description":"","expertCode":"RESULT_VAR = VAR_0[0].hostname;","expertVar":"//var RESULT_VAR = #6477AB.(request).metadata.name;\n//var VAR_0 = #C77E7E.(response).success.result[];","simpleCode":null,"language":"js","links":[]},"to":[{"color":"#6477AB","type":"request","field":"metadata.name","links":[]}],"links":[]}],"links":[]}}